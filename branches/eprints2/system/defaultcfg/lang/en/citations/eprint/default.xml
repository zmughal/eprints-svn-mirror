<?xml version="1.0" ?>

<!-- 
	Full citation for an eprint. 
-->

<citation
        xmlns:xhtml="http://www.w3.org/1999/xhtml"
	xmlns="http://eprints.org/ep3/citations">

<choose>

  <when test="$item.type = 'book'">
    <ifset name="creators">@creators@</ifset><ifnotset  name="creators">@editors@, ed.</ifnotset>
  </when>

  <when test="$item.type = 'patent'">@patent_applicant@</when>

  <otherwise>@creators@</otherwise>

</choose>

<print expr="$item.creators" />
<xhtml:hr />
<print expr="$item.userid.as_item().name" />
<xhtml:hr />

<if test="$user" >
<xhtml:h1>
  <print expr="$user.name" />
</xhtml:h1>
</if>

<if test="$item.date_effective">(@date_effective;res=year@)</if>
<linkhere><em>@title;magicstop@</em></linkhere>

<choose>

  <when test="$item.type.one_of( 'book','book_section' )">
    <if test="$item.type = 'book_section'">
      In: <ifnotset  name="creators">@editors@, (eds).</ifnotset> 
      @book_title;magicstop@
    </if>
    <ifset name="series">@series@<ifset name="volume">, @volume</ifset><ifset name="number"> (@number@)</ifset>.</ifset>
@publisher@<ifset name="place_of_pub">, @place_of_pub</ifset><ifset name="pagerange">, @pagerange@</ifset>.
    <ifset name="isbn"> ISBN @isbn@</ifset>
  </when>

  <when test="$item.type = 'article'">
    <ifset name="publication">@publication@<if test="$item.is_set( 'volume' )">, @volume</if><ifset name="number"> (@number@)</ifset>.</ifset>
    <ifset name="pagerange"> @pagerange@.</ifset>
    <ifset name="issn"> ISSN @issn@</ifset>
  </when>

  <when test="$item.type = 'monograph'">
    @monograph_type@.
    @publisher@<ifset name="place_of_pub">, @place_of_pub</ifset>.
  </when>

  <when test="$item.type = 'conference_item'">
    In: @event_title@<ifset name="event_dates">, @event_dates</ifset><ifset name="event_location">, @event_location</ifset>.
  </when>

  <when test="$item.type = 'thesis'">
    @thesis_type@ thesis, @institution@.
  </when>

  <when test="$item.type = 'patent'">
    @id_number@.
  </when>

  <when test="$item.type = 'other'">
    @publisher@<ifset name="place_of_pub">, @place_of_pub</ifset>.
  </when>

</choose>

<if test="! $item.type.one_of( 'patent','thesis' )">
  <if test="$item.ispublished.one_of('unpub', 'submitted', 'inpress')"> (@ispublished@)</if>
</if>

</citation>

