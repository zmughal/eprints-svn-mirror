=head1 Installation

Unpack the eprints tar.gz file, and run the install-eprints.pl script, answer the questions it asks.

This will create a user and group called "eprints".

Edit your apache.conf in the way described by install-eprints.pl.

Unless you are not installing in /opt/eprints2/ the changes are in "httpd.conf":

Edit "User" and "Group" to be:

 User eprints
 Group eprints

And add the line:

 Include /opt/eprints2/cfg/apache.conf

=head1 Creating an archive

Make sure MySQL is actually running.

Change to  your eprints user (probably "eprints").

cd to the eprints directory (/opt/eprints2 by default) and run bin/configure_archive, answer the questions it asks.

Run

 bin/generate_apacheconf archiveid
 bin/create_tables archiveid
 bin/import_subjects archiveid
 bin/generate_static archiveid
 bin/create_user archiveid userid email admin password

Where userid, email and password are your choice. you can create multiple users if you like. 'user' instead of 'staff' will give a user less privs.

Then restart your webserver: 

 /etc/rc.d/init.d/httpd stop
 /etc/rc.d/init.d/httpd start

Don't just use 'reload' or 'restart' as these do not force mod_perl to reload it's modules.

Now connect via the web and check it works...

=head1 Browse Views

Once every so often you should run the "generate_views" script on each archive in your system to regenerate the browse views section of the site.

This is a set of static pages. By default one per subject, and one per year (only years with papers in that year not EVERY year ever!). Some users prefer to
browse the system than search it. This also gives search engines a way to reach, and index, the abstract pages. 

See the ArchiveConfig.pm config notes on how to edit the views it generates.

See the How-To section for some suggestions on how to set up views.

=head2 But I don't want this feature...

If you don't want to use this feature: don't, it's your archive. Remove the link from the template and front page.

=head2 Setting it up

This is best done by using the UNIX "cron" command (as user "eprints"). Cron will email "eprints" on that machine with the output, so best use the --quiet option so it only bothers you with errors.

How often you want to run this depends on the size of your archive, and how fast the contents changes. This feature is roughly order "n". Which means if you double the number of items in your archive then you double the time it takes to run (ish). 

Once an hour would seem a good starting point. If your archive gets real big, say more than 10000 records, then maybe once a day is more realistic - the one thing that you don't want to happen is for a new generate_views to start before the old one finishes as they will mess up each others output.

Run generate_views on the command line to find out how long it takes. 

To set up cron, run (as eprints):

 crontab -e

and add the line 

 23 * * * * /opt/eprints2/bin/generate_views I<archiveid>

This runs at 23 minutes past each hour. If you have more than one archive, don't make them all start rebuilding stuff at the same time, stagger it. Otherwise once an hour everything will slow down as it fights to run several intensive scripts at once.

See the crontab man page C<man 5 crontab> for more information on using cron.


=head1 Default Configuration

EPrints configures a  new archive with a set of metadata fields aimed at an archive of research papers. 

The initial "types" of eprint (book, poster, conference paper) are configured in metadata-types.xml

The initial subjects are just some we made up, they are not a recommendation. You will certainly want to change them.

The authors and editors have the "hasid" option set which allows people to optionally use a unique id for a person in addition to their name (names are NOT unique!) - this can be useful for generating "CV" pages (see the views how-to) and possibly for generating statistics. Without it you will never be sure which "John Smith" wrote that paper. If you don't like this feature remove the "hasid" from the authors and editors - this will require you to recreate the tables, erasing the archive, so decide before you start. If you want to be more clear about what information goes in that field, edit the phrases C<eprint_fieldname_authors_id> and C<eprint_fieldname_editors_id> in the archive phrase file(s).

In general: Change it! It's not a recommended system setup, just a good starting point.

=head1 New Configurations

If you are setting up more than one archive which are related to each other, a "community", you may wish to establish common subjects and metadata.

Removing and adding types is easy. Removing and adding fields is a bit more work. All "screen" names of values are stored in the archives own "phrase file" which comes with phrases for the default config.

If you create a good default configuration for a different purpose or language(s) (and would like to share it), please contact the eprints admin who may want to put it online as an example or even include it as an alternate default in a later version.



