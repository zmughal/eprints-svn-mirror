.SUFFIXES: 
.SUFFIXES: .html .xml .pdf .dvi .latex .ps .ok

WORK_DIR = work
DOCBOOK_ROOT = /usr/local/share/docbook
XHTML = $(DOCBOOK_ROOT)/xhtml/docbook.xsl
LATEX = $(DOCBOOK_ROOT)/latex/docbook.xsl

all: alpha

.xml.html: 
	./wellformed.pl $<
	xt $< $(XHTML) > $@

.xml.latex: 
	./wellformed.pl $<
	xt $< $(LATEX) > $*.latex

.latex.dvi:
	test -d work || mkdir work
	cp $< $(WORK_DIR)
	cd $(WORK_DIR); latex $<
	cp $(WORK_DIR)/$*.dvi .

.dvi.pdf:
	echo hi
	dvipdfm $<

.dvi.ps:
	dvips $< -o $@

clean:
	rm -f *.html *.pdf *.ps *.dvi *.latex

.xml.ok:
	./wellformed.pl $< NODTD
	touch $@

eprints.entities: history.ok reqsoftware.ok listinfo.ok
	touch eprints.entities

alpha: eprints.entities alpha.pdf alpha.html alpha.ps
