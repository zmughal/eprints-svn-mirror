#!/usr/bin/perl -w

######################################################################
#
#  Process daily subscriptions.
#
#   This script should be run once a day. Running it twice in one day
#   will result in the daily subscriptions being sent out twice.
#
######################################################################
#
#  __COPYRIGHT__
#
# Copyright 2000-2008 University of Southampton. All Rights Reserved.
# 
#  __LICENSE__
#
######################################################################


use EPrints::Database;
use EPrints::Session;
use EPrints::Subscription;
use EPrints::User;

use strict;


# Create offline session
my $session = new EPrints::Session( 1 );
exit unless( defined $session );

my @subs = EPrints::Subscription::get_daily( $session );

foreach (@subs)
{
	$_->process();
}
