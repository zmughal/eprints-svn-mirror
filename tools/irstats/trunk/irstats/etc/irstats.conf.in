#Set configuration for irstats with this file

# the repository type (used by update_table)
repository_type = eprints3
# repository_type = eprints2

# the eprints repository to extract from
repository = soton

# sets to allow filtering by
set_ids = internal_group, subjects, creators

# optional field used to uniquely identify the creator's name (value gets anonymised)
creators_id_field = creators_empid
# or, don't anonymise
# subjects_code_field = subjects

# paths
root = @PREFIX@

cache_path = @PREFIX@/var/cache/irstats/stats
static_path = @PREFIX@/htdocs
view_path = @IRSTATS_LIB@/IRStats/View/

# the URL for htdocs/ - blank means root
static_url = 

#the name of the file that is created to prevent the update process running twice concurrently
update_lock_filename = @PREFIX@/var/lock/subsys/irstats

#the names of the files used to store set information 
set_member_full_citations_file = data/irstats_set_member_full_citations.txt
set_member_short_citations_file = data/irstats_set_member_short_citations.txt
set_membership_file = data/irstats_set_membership.txt
set_member_codes_file = data/irstats_set_member_codes.txt
set_member_urls_file = data/irstats_set_member_urls.txt
set_phrases_file = data/irstats_set_phrases.txt

# geo-ip
geo_ip_org_file = /usr/local/share/GeoIP/GeoIPOrg.dat

#file to use for dns caching
dns_cache_file = @PREFIX@var/cache/irstats/dns_cache

# Maximum time to leave cache files around (1 week by default)
max_cache_age = 604800

#Referrer Scope Labels (note, if you change these, you should also change them in the database)
referrer_scope_1 = Repository 
referrer_scope_2 = Southampton
referrer_scope_3 = Search
referrer_scope_4 = External
referrer_scope_no_referrer = None

#repeats filter file to maintain state between updates
repeats_filter_file = @PREFIX@/var/cache/irstats/repeatscache
#repeat timeout in seconds (the amount of time there needs to be between two hits for second hit to be recorded).
#initially set to 60*60*24 = 1 day
repeats_filter_timeout = 86400

#the repository URL - used to determine referrer scope
repository_url = http://eprints.soton.ac.uk

#database configuration
database_driver = mysql
database_server = localhost
database_name = soton
database_id_columns = requester_organisation, requester_host, referrer_scope, search_engine, search_terms, referring_entity_id
database_user = irstats
database_password = sausage

#Various table names and parts of names
database_eprints_access_log_table = access
database_table_prefix = irstats_
database_main_stats_table = irstats_true_accesses_table
database_column_table_prefix = irstats_column_
database_set_table_prefix = irstats_set_
database_set_table_code_suffix = _code
database_set_table_citation_suffix = _citation

#the parameters that are used to uniquely identify a view.
id_parameters = start_date, end_date, eprints, view

# dashboard views
all_dashboard = AllMonthlyDownloadsGraph, TopTenTable, ReferrerGraph, TopTenAcademies, TopTenNonSearchReferrers, TopTenSearchTermsTable
eprint_dashboard = AllMonthlyDownloadsGraph, DailyDownloadsGraph, ReferrerGraph, TopTenAcademies, TopTenNonSearchReferrers, TopTenSearchTermsTable

